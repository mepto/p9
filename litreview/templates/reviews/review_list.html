{% extends 'base.html' %}

{% block main %}
  <div>
    <a class="btn btn-default" href="{% url 'ticket-new' %}">
      <i class="bi bi-bookmark-plus"></i> Create a request ticket</a>
    <a class="btn btn-default" href="{% url 'review-new' %}">
      <i class="bi bi-chat-square-quote"></i> Create a review</a>
  </div>

  {% for item in page_obj %}
    <div class="ticket mt-5">
      <div class="col-12 bg-dark ticket-header d-flex justify-content-between
       align-items-stretch">
        <h3 class="align-self-center mb-0 pt-1 pb-1 pe-2 ps-2">
          <i class="bi bi-chat-left-quote"></i>
          {% if item.user == user %}
            &nbsp;<strong>You</strong> submitted a review</h3>
            <span class="align-self-center">
            <a class="btn btn-outline-light ms"
               href="{% url 'review-edit' item.id %}">
              <i class="bi bi-pencil"></i> Edit</a>
            <a class="btn btn-outline-light"
               href="{% url 'review-delete' item.id %}">
              <i class="bi bi-trash"></i> Delete</a>
          </span>
          {% else %}
            <strong>{{ item.user }}</strong> submitted a review</h4>
          {% endif %}
        <span class="float-end align-self-center"><small>
          {{ item.time_created }}</small></span>
      </div>
      <div class="col-12 ticket-content">
        <h4 class="fw-bold">{{ item.headline }}</h4>
        <hr>
        <div>
          {% with ''|center:item.rating as range %}
            {% for _ in range %}
              <i class="bi bi-star-fill"></i>
            {% endfor %}
          {% endwith %}
        </div>
        <div>{{ item.body }}</div>
      </div>
    </div>
  {% endfor %}

  {% include 'pagination.html' %}

{% endblock %}
